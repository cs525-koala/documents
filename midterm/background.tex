\section{Background}
% If nothing else, describe eucalyptus in sufficient detail
% that we can refer to the components (cloud controller, etc)
% Maybe discuss the existing schedulers briefly?

Koala runs on Eucalyptus, a system which provides an Infrastructure as a
Service (IaaS) cloud interface.  This exposes virtualized hardware resources to
the user, allowing them to build and manage the system as they see fit.
Eucalyptus is made of a hierarchy of controllers, including the Node
Controllers (NCs), Cluster Controllers (CCs), Cloud Level Controller (CLC),
Storage Controllers (SCs), and the Walrus Storage Controller.  They communicate
through web front ends, generated by Web Services Description Language
(WSDL).An overview of these components and how they interacted is shown in
Figure~\ref{fig:Eucalyptus}.

\scalefig{Eucalyptus}{0.9}{Eucalyptus System Overview}

\subsection{Node Controller}
Node Controllers are at the bottom of the Eucalyptus hierarchy.  They are responsible for communicating with the hypervisor running on the node through the libvirt virtualization library.  Prior to our modifications and ignoring inter-VM communication, the Node Controllers communicate exclusively with their respective Cluster Controller.  They maintain the state of the VM and the host system's resources and communicate them back to the Cluster Controller.

\subsection{Cluster Controller}
Cluster Controllers are responsible for maintaining the state of a number of nodes.  The send heartbeats and query information about the instances and resources on each node and passes some of this information up to the CLC.  The CC is responsible for scheduling instances to the nodes it maintains.  It caches information on the nodes and instances in order to not have to poll all the nodes as it scales to larger numbers.

\subsection{Cloud Level Controller}
The Cloud Level Controller is responsible for managing the various controllers in the Cloud and providing a web front-end to administer the Cloud.  The CLC talks with the CCs, SCs, and Walrus Controller and communicates and interfaces between them.  It also manages network resources and is responsible for many of the security functionality of Eucalyptus.

\subsection{Storage Controller}
A Storage Controller would normally be group with each cluster in a cloud.  The SC exposes a block level storage, which the VMs can mount and store persistent data.  The SC is designed to implement the Amazon Elastic Block Storage (EBS) specification.

\subsection{Walrus Controller}
Walrus is a Eucalyptus's put-get bucket storage system.  It is designed to be compatible with Amazon's S3 storage system.  Eucalyptus uses Walrus for storage of user data and access control for VMs.
